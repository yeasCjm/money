var Glob_Emoji = {
    "weixin" : {
        "[微笑]":{"option":"4px -381px"},
        "[撇嘴]":{"option":"-29px -381px"},
        //"[色]":{"option":"-62px -381px"},
        "[发呆]":{"option":"-93px -381px"},
        //"[得意]":{"option":"-125px -381px"},
        "[流泪]":{"option":"-157px -381px"},
        "[害羞]":{"option":"-189px -381px"},
        "[闭嘴]":{"option":"-220px -381px"},
        "[睡]":{"option":"-252px -381px"},
        "[大哭]":{"option":"-285px -381px"},
        "[尴尬]":{"option":"-317px -381px"},
        "[发怒]":{"option":"-350px -381px"},
        "[调皮]":{"option":"-382px -381px"},
        "[呲牙]":{"option":"-414px -381px"},
        "[惊讶]":{"option":"-446px -381px"},
        "[难过]":{"option":"4px -409px"},
        "[酷]":{"option":"-29px -409px"},
        "[冷汗]":{"option":"-62px -409px"},
        "[抓狂]":{"option":"-93px -409px"},
        "[吐]":{"option":"-125px -409px"},
        "[偷笑]":{"option":"-157px -409px"},
        "[愉快]":{"option":"-188px -409px"},
        "[白眼]":{"option":"-220px -409px"},
        "[傲慢]":{"option":"-252px -409px"},
        "[饥饿]":{"option":"-285px -409px"},
        "[困]":{"option":"-317px -409px"},
        "[惊恐]":{"option":"-350px -409px"},
        "[流汗]":{"option":"-382px -409px"},
        "[憨笑]":{"option":"-414px -409px"},
        "[悠闲]":{"option":"-446px -409px"},
        "[奋斗]":{"option":"4px -439px"},
        "[咒骂]":{"option":"-29px -439px"},
        "[疑问]":{"option":"-62px -439px"},
        "[嘘]":{"option":"-93px -439px"},
        //"[晕]":{"option":"-125px -439px"},
        "[疯了]":{"option":"-157px -439px"},
        "[衰]":{"option":"-189px -439px"},
        //"[骷髅]":{"option":"-220px -439px"},
        "[敲打]":{"option":"-252px -439px"},
        "[再见]":{"option":"-285px -439px"},
        "[擦汗]":{"option":"-317px -439px"},
        "[抠鼻]":{"option":"-350px -439px"},
        "[鼓掌]":{"option":"-382px -439px"},
        "[糗大了]":{"option":"-414px -439px"},
        "[坏笑]":{"option":"-446px -439px"},
        "[左哼哼]":{"option":"4px -468px"},
        "[右哼哼]":{"option":"-29px -468px"},
        "[哈欠]":{"option":"-62px -468px"},
        "[鄙视]":{"option":"-93px -468px"},
        "[委屈]":{"option":"-125px -468px"},
        "[快哭了]":{"option":"-157px -468px"},
        "[阴险]":{"option":"-189px -468px"},
        "[亲亲]":{"option":"-220px -468px"},
        "[吓]":{"option":"-252px -468px"},
        "[可怜]":{"option":"-285px -468px"},
        "[菜刀]":{"option":"-317px -468px"},
        "[西瓜]":{"option":"-350px -468px"},
        //"[啤酒]":{"option":"-382px -468px"},
        //"[篮球]":{"option":"-414px -468px"},
        "[乒乓]":{"option":"-446px -468px"},
        //"[咖啡]":{"option":"4px -497px"},
        "[饭]":{"option":"-29px -497px"},
        "[猪头]":{"option":"-62px -497px"},
        //"[玫瑰]":{"option":"-87px -497px"},
        "[凋谢]":{"option":"-125px -497px"},
        "[嘴唇]":{"option":"-157px -497px"},
        "[爱心]":{"option":"-189px -497px"},
        //"[心碎]":{"option":"-220px -497px"},
        //"[蛋糕]":{"option":"-252px -497px"},
        //"[闪电]":{"option":"-285px -497px"},
        //"[炸弹]":{"option":"-317px -497px"},
        "[刀]":{"option":"-350px -497px"},
        //"[足球]":{"option":"-382px -497px"},
        "[瓢虫]":{"option":"-414px -497px"},
        //"[便便]":{"option":"-446px -497px"},
        //"[月亮]":{"option":"4px -157px"},
        //"[太阳]":{"option":"-29px -526px"},
        //"[礼物]":{"option":"-62px -526px"},
        "[拥抱]":{"option":"-93px -526px"},
        //"[强]":{"option":"-125px -526px"},
        //"[弱]":{"option":"-157px -526px"},
        "[握手]":{"option":"-189px -526px"},
        //"[胜利]":{"option":"-220px -526px"},
        "[抱拳]":{"option":"-252px -526px"},
        "[勾引]":{"option":"-285px -526px"},
        //"[拳头]":{"option":"-317px -526px"},
        "[差劲]":{"option":"-350px -526px"},
        "[爱你]":{"option":"-382px -526px"},
        "[NO]":{"option":"-414px -526px"},
        "[OK]":{"option":"-446px -526px"},
        "[爱情]":{"option":"4px -555px"},
        "[飞吻]":{"option":"-29px -555px"},
        "[跳跳]":{"option":"-62px -555px"},
        "[发抖]":{"option":"-93px -555px"},
        "[怄火]":{"option":"-125px -555px"},
        "[转圈]":{"option":"-157px -555px"},
        "[磕头]":{"option":"-189px -555px"},
        "[回头]":{"option":"-220px -555px"},
        "[跳绳]":{"option":"-252px -555px"},
        "[投降]":{"option":"-285px -555px"},
        "[激动]":{"option":"-317px -555px"},
        "[乱舞]":{"option":"-350px -555px"},
        "[献吻]":{"option":"-382px -555px"},
        "[左太极]":{"option":"-414px -555px"},
        "[右太极]":{"option":"-446px -555px"},
////////////////////////////////一下为微信表情部分////////////////////////////////////
        "[笑脸]":{"option":"2px 2px"},
        "[生病]":{"option":"-30px 2px"},
        "[破涕为笑]":{"option":"-62px 2px"},
        "[吐舌]":{"option":"-94px 2px"},
        "[脸红]":{"option":"-126px 2px"},
        "[恐惧]":{"option":"-158px 2px"},
        "[失望]":{"option":"-190px 2px"},
        "[无语]":{"option":"-222px 2px"},
        "[嘿哈]":{"option":"-254px 2px"},
        "[捂脸]":{"option":"-286px 2px"},
        "[奸笑]":{"option":"-318px 2px"},
        "[机智]":{"option":"-350px 2px"},
        "[皱眉]":{"option":"-382px 2px"},
        "[耶]":{"option":"-414px 2px"},
        "[鬼魂]":{"option":"-446px 2px"},
        "[合十]":{"option":"2px -30px"},
        "[强壮]":{"option":"-30px -30px"},
        "[庆祝]":{"option":"-62px -30px"},
        "[礼物]":{"option":"-94px -30px"},
        "[红包]":{"option":"-126px -30px"},
        "[鸡]":{"option":"-350px -190px"},
        "[开心]":{"option":"-190px -30px"},
        "[大笑]":{"option":"-222px -30px"},
        "[热情]":{"option":"-254px -30px"},
        "[眨眼]":{"option":"-286px -30px"},
        "[色]":{"option":"-318px -30px"},
        "[接吻]":{"option":"-350px -30px"},
        "[亲吻]":{"option":"-382px -30px"},
        "[露齿笑]":{"option":"-414px -30px"},
        "[满意]":{"option":"-446px -30px"},
        "[戏弄]":{"option":"2px -62px"},
        "[得意]":{"option":"-30px -62px"},
        "[汗]":{"option":"-62px -62px"},
        "[低落]":{"option":"-94px -62px"},
        "[呸]":{"option":"-126px -62px"},
        "[焦虑]":{"option":"-158px -62px"},
        "[担心]":{"option":"-190px -62px"},
        "[震惊]":{"option":"-222px -62px"},
        "[悔恨]":{"option":"-254px -62px"},
        "[眼泪]":{"option":"-286px -62px"},
        "[哭]":{"option":"-318px -62px"},
        "[晕]":{"option":"-350px -62px"},
        "[心烦]":{"option":"-382px -62px"},
        "[生气]":{"option":"-414px -62px"},
        "[睡觉]":{"option":"-446px -62px"},
        "[恶魔]":{"option":"2px -94px"},
        "[外星人]":{"option":"-30px -94px"},
        "[心]":{"option":"-62px -94px"},
        "[心碎]":{"option":"-94px -94px"},
        "[丘比特]":{"option":"-126px -94px"},
        "[闪烁]":{"option":"-158px -94px"},
        "[星星]":{"option":"-190px -94px"},
        "[叹号]":{"option":"-222px -94px"},
        "[问号]":{"option":"-254px -94px"},
        "[睡着]":{"option":"-286px -94px"},
        "[水滴]":{"option":"-318px -94px"},
        "[音乐]":{"option":"-350px -94px"},
        "[火]":{"option":"-382px -94px"},
        "[便便]":{"option":"-414px -94px"},
        "[强]":{"option":"-446px -94px"},
        "[弱]":{"option":"2px -126px"},
        "[拳头]":{"option":"-30px -126px"},
        "[胜利]":{"option":"-62px -126px"},
        "[上]":{"option":"-94px -126px"},
        "[下]":{"option":"-126px -126px"},
        "[右]":{"option":"-158px -126px"},
        "[左]":{"option":"-190px -126px"},
        "[第一]":{"option":"-222px -126px"},
        "[吻]":{"option":"-254px -126px"},
        "[热恋]":{"option":"-286px -126px"},
        "[男孩]":{"option":"-318px -126px"},
        "[女孩]":{"option":"-350px -126px"},
        "[女士]":{"option":"-382px -126px"},
        "[男士]":{"option":"-414px -126px"},
        "[天使]":{"option":"-446px -126px"},
        "[骷髅]":{"option":"2px -158px"},
        "[红唇]":{"option":"-30px -158px"},
        "[太阳]":{"option":"-62px -158px"},
        "[下雨]":{"option":"-94px -158px"},
        "[多云]":{"option":"-126px -158px"},
        "[雪人]":{"option":"-158px -158px"},
        "[月亮]":{"option":"-190px -158px"},
        "[闪电]":{"option":"-222px -158px"},
        "[海浪]":{"option":"-254px -158px"},
        "[猫]":{"option":"-286px -158px"},
        "[小狗]":{"option":"-318px -158px"},
        "[老鼠]":{"option":"-350px -158px"},
        "[仓鼠]":{"option":"-382px -158px"},
        "[兔子]":{"option":"-414px -158px"},
        "[狗]":{"option":"-446px -158px"},
        "[青蛙]":{"option":"2px -190px"},
        "[老虎]":{"option":"-30px -190px"},
        "[考拉]":{"option":"-62px -190px"},
        "[熊]":{"option":"-94px -190px"},
        "[猪]":{"option":"-126px -190px"},
        "[牛]":{"option":"-158px -190px"},
        "[野猪]":{"option":"-190px -190px"},
        "[猴子]":{"option":"-222px -190px"},
        "[马]":{"option":"-254px -190px"},
        "[蛇]":{"option":"-286px -190px"},
        "[鸽子]":{"option":"-318px -190px"},
        "[企鹅]":{"option":"-382px -190px"},
        "[毛虫]":{"option":"-414px -190px"},
        "[章鱼]":{"option":"-446px -190px"},
        "[鱼]":{"option":"2px -222px"},
        "[鲸鱼]":{"option":"-30px -222px"},
        "[海豚]":{"option":"-62px -222px"},
        "[玫瑰]":{"option":"-94px -222px"},
        "[花]":{"option":"-126px -222px"},
        "[棕榈树]":{"option":"-158px -222px"},
        "[仙人掌]":{"option":"-190px -222px"},
        "[礼盒]":{"option":"-222px -222px"},
        "[南瓜灯]":{"option":"-254px -222px"},
        "[圣诞老人]":{"option":"-286px -222px"},
        "[圣诞树]":{"option":"-318px -222px"},
        "[铃]":{"option":"-350px -222px"},
        "[气球]":{"option":"-382px -222px"},
        "[CD]":{"option":"-414px -222px"},
        "[相机]":{"option":"-446px -222px"},
        "[录像机]":{"option":"2px -254px"},
        "[电脑]":{"option":"-30px -254px"},
        "[电视]":{"option":"-62px -254px"},
        "[电话]":{"option":"-94px -254px"},
        "[解锁]":{"option":"-126px -254px"},
        "[锁]":{"option":"-158px -254px"},
        "[钥匙]":{"option":"-190px -254px"},
        "[成交]":{"option":"-222px -254px"},
        "[灯泡]":{"option":"-254px -254px"},
        "[邮箱]":{"option":"-286px -254px"},
        "[浴缸]":{"option":"-318px -254px"},
        "[钱]":{"option":"-350px -254px"},
        "[炸弹]":{"option":"-382px -254px"},
        "[手枪]":{"option":"-414px -254px"},
        "[药丸]":{"option":"-446px -254px"},
        "[橄榄球]":{"option":"2px -286px"},
        "[篮球]":{"option":"-30px -286px"},
        "[足球]":{"option":"-62px -286px"},
        "[棒球]":{"option":"-94px -286px"},
        "[高尔夫]":{"option":"-126px -286px"},
        "[奖杯]":{"option":"-158px -286px"},
        "[入侵者]":{"option":"-190px -286px"},
        "[唱歌]":{"option":"-222px -286px"},
        "[吉他]":{"option":"-254px -286px"},
        "[比基尼]":{"option":"-286px -286px"},
        "[皇冠]":{"option":"-318px -286px"},
        "[雨伞]":{"option":"-350px -286px"},
        "[手提包]":{"option":"-382px -286px"},
        "[口红]":{"option":"-414px -286px"},
        "[戒指]":{"option":"-446px -286px"},
        "[钻石]":{"option":"2px -318px"},
        "[咖啡]":{"option":"-30px -318px"},
        "[啤酒]":{"option":"-62px -318px"},
        "[干杯]":{"option":"-94px -318px"},
        "[鸡尾酒]":{"option":"-126px -318px"},
        "[汉堡]":{"option":"-158px -318px"},
        "[薯条]":{"option":"-190px -318px"},
        "[意面]":{"option":"-222px -318px"},
        "[寿司]":{"option":"-254px -318px"},
        "[面条]":{"option":"-286px -318px"},
        "[煎蛋]":{"option":"-318px -318px"},
        "[冰激凌]":{"option":"-350px -318px"},
        "[蛋糕]":{"option":"-382px -318px"},
        "[苹果]":{"option":"-414px -318px"},
        "[飞机]":{"option":"-446px -318px"},
        "[火箭]":{"option":"2px -350px"},
        "[自行车]":{"option":"-30px -350px"},
        "[高铁]":{"option":"-62px -350px"},
        "[警告]":{"option":"-94px -350px"},
        "[旗]":{"option":"-126px -350px"},
        "[男人]":{"option":"-158px -350px"},
        "[女人]":{"option":"-190px -350px"},
        "[O]":{"option":"-222px -350px"},
        "[X]":{"option":"-254px -350px"},
        "[版权]":{"option":"-286px -350px"},
        "[注册商标]":{"option":"-318px -350px"},
        "[商标]":{"option":"-350px -350px"}
    }
};


//页内容统计
function Glob_Page_Stat(title, f, dats){
  var stat = { //统计
    "disabled_selected" : 1
  };
  stat[title[0]] = title[1];  //头部

  for(var i = 0; i < f.length; i++) stat[f[i]] = 0;

  for(var i = 0; i < dats.length; i++ ){
      for(var k in stat){
          if(!dats[i][k] || k == title[0] || 'disabled_selected' == k) continue;
          var v = parseFloat(dats[i][k].toString().replace(',',''));
          stat[k] += isNaN(v) ? 0 : v;
      }
  }

  for(var k in stat){
     if(k != title[0] && 'disabled_selected' != k) stat[k] = stat[k].toFixed(2);
  }
  return stat;
}


//dialog弹窗位置调整
function Dialog_Show(o,p){
  o.dialog(p);
  //高度超出屏幕则顶部间距5px，否则居中
  if(o.height() < document.documentElement.clientHeight){
      o.window('center'); //使Dialog居中显示
  } else {
      o.dialog({"top":'5px'});
  }
};

//获取公共数据
var Glob_Object = {
  "create_option" : function(o){
            if('object' != typeof(o)){console.log("Error from Customer_Object.create_option !"); return;}
            var def = {
              dats : o.dats,
              obj  : o.obj,
              id   : o.id,
              text : o.text,
              callback : o.callback ? o.callback : null
            };
            def.obj.find("option:not(:first-child)").remove();
            $.each(def.dats, function(i, v){
              var value = def.id ? v[def.id] : i.toString();
              var txt = def.text ? v[def.text] : v;
              def.obj.append('<option value="'+value+'">'+txt+'</option>');
            });
            if(def.callback) def.callback();
   },
   "create_customer_source" : function(o, c){
           this.create_option({
             dats  : parent.DmConf.data.customer_source,
             obj   : o,
             id    : "source_id",
             text  : "source",
             callback : c
           });
   },
   "create_customer_child_source" : function(o, c){
           this.create_option({
             dats  : parent.DmConf.data.customer_child_source,
             obj   : o,
             id    : "tel_id",
             text  : "name",
             callback : c
           });
   },
   "create_customer_property" : function(o, c){
           this.create_option({
             dats  : parent.DmConf.data.customer_property,
             obj   : o,
             id    : "property_id",
             text  : "property_name",
             callback : c
           });
   },
   "create_customer_child_property" : function(o, c){
           this.create_option({
             dats  : parent.DmConf.data.customer_child_property,
             obj   : o,
             id    : "child_id",
             text  : "name",
             callback : c
           });
   },
   "create_finance_platform" : function(o, c){
           this.create_option({
             dats  : parent.DmConf.data.finance_platform,
             obj   : o,
             id    : "platform_id",
             text  : "platform_name",
             callback : c
           });
   },
   "create_join_version" : function(o, c){
           this.create_option({
             dats  : parent.DmConf.data.join_version,
             obj   : o,
             id    : "id",
             text  : "name",
             callback : c
           });
   },
   "create_customer_vip" : function(o, c){
           this.create_option({
             dats  : parent.DmConf.data.customer_vip,
             obj   : o,
             id    : "id",
             text  : "vip_name",
             callback : c
           });
   },
   "create_attribute_list" : function(o, c){
             this.create_option({
               dats  : parent.DmConf.data.attribute_list,
               obj   : o,
               id    : "val",
               text  : "name",
               callback : c
             });
   },
   "create_customer_status" : function(o, c){
             this.create_option({
               dats  : parent.DmConf.data.customer_status,
               obj   : o,
               id    : "status_id",
               text  : "status_name",
               callback : c
             });
   },
   "create_customer_type" : function(o, c){
             this.create_option({
               dats  : parent.DmConf.data.customer_type,
               obj   : o,
               id    : "val",
               text  : "name",
               callback : c
             });
   },
   "create_stock_list" : function(o, c){
           this.create_option({
             dats  : parent.DmConf.data.stock,
             obj   : o,
             id    : "id",
             text  : "stock_name",
             callback : c
           });
   },
   //消息分类
   "msg_group" : function(o, c){
           this.create_option({
             dats  : parent.DmConf.data.msg_group,
             obj   : o,
             id    : "val",
             text  : "name",
             callback : c
           });
   },
   //消息分类
   "msg_directs" : function(o, c){
           this.create_option({
             dats  : parent.DmConf.data.msg_directs,
             obj   : o,
             id    : "val",
             text  : "name",
             callback : c
           });
   },
   "create_user_list" : function(o, c){
           this.create_option({
             dats  : parent.DmConf.data.user_list,
             obj   : o,
             id    : "user_id",
             text  : "real_name",
             callback : c
           });
   },
   "create_user_level_list" : function(o, c){
           this.create_option({
             dats  : parent.DmConf.data.user_leve,
             obj   : o,
             id    : "level_id",
             text  : "level_name",
             callback : c
           });
   },
   "create_province_list" : function(o, c){   //创建省份列表
         this.create_option({
           dats  : parent.DmConf.data.province_list,
           obj   : o,
           id    : "",
           text  : "province_name",
           callback : c
         });
   },
   "create_city_list" : function result_city(pid, sel, callback){
           var province_id = parseInt(pid);
           sel.find('option:not(:first-child)').remove();
           if(province_id > 0){
             $.each(parent.DmConf.data.city_list, function(i, v){
               if(v.province_id == province_id) sel.append('<option value="'+i+'">'+v.city_name+'</option>');
             });
             if(callback) callback();
           }
   },
   "result_area" : function(sel, pid, callback){
           var city_id = parseInt(pid);
           sel.find('option:not(:first-child)').remove();
           parent.get_dats(parent.DmConf.api.system.arealist, { "city_id": city_id }, function(data, err){
               if(err || !data.status){ console.log("获取地区列表失败!"); return false; }
               data.data.forEach(function(val, i, arr) {
                  sel.append('<option value="'+val.area_id+'">'+val.area_name+'</option>');
               });
               if(callback) callback();
           });
   },
   //排序
   "sort" : function(o, c){
         this.create_option({
           dats  : parent.DmConf.data.attribute_sort,
           obj   : o,
           id    : "val",
           text  : "name",
           callback : c
         });
   },
   //根据微信号精确查询uin
   "get_wx_uin" : function(wx_number){
           var uinLst = '';
           var wx = parent.DmConf.data.user_weixin;
           if(wx_number.length > 0){
               for(var i in wx){
                 if( wx[i].weixin_number == wx_number ) {
                   uinLst = wx[i].uin;
                   break;
                 }
               }
           }
           return uinLst;
   },
   //模糊查找微信uin
   "search_wx_uin" : function(w){
          var uinLst = '';
          var wx = parent.DmConf.data.user_weixin;
          if(w.length > 0){
              for(var i in wx){
                if( wx[i].weixin_number.indexOf(w) > -1 || wx[i].nick_name.indexOf(w) > -1 ) uinLst += wx[i].uin + ',';
              }
              if(uinLst.length > 1) uinLst = uinLst.substr(0, uinLst.length - 1);
          }
          return uinLst;
  },
  //快递列表
  "express_list" : function(o, c){
          this.create_option({
            dats  : parent.DmConf.data.express,
            obj   : o,
            callback : c
          });
  },
  "product_kind" : function(o, c){
      this.create_option({
        dats  : parent.DmConf.data.product_kind,
        obj   : o,
        callback : c
      });
  },
  //产品列表: o => 元素, c => 回调, kind_id => 产品类id(可选 如果不传或为0则返回所有产品)
  "product" : function(o, kind_id, c){
         var p = parent.DmConf.data.product;
         o.find("option:not(:first-child)").remove();
         $.each(p, function(i, v){
             if(kind_id && kind_id != v.kind_id) return;
              var opt = $('<option value="' + v.product_id + '">' + v.product_name + '</option>');
              opt.data("raw",v);
              o.append(opt);
         });
         if(c) c();
  },
  //支付类型
  "pay_method" : function(o, c){
          this.create_option({
            dats  : parent.DmConf.data.pay_method,
            obj   : o,
            id    : "method_id",
            text  : "method_name",
            callback : c
          });
  },
  //订单类型
  "order_kind" : function(o, c){
        this.create_option({
          dats  : parent.DmConf.data.order_kind,
          obj   : o,
          callback : c
        });
  },
  //意向产品is_intention
  "product_intention" : function(o, c){
        var p = parent.DmConf.data.product;
        o.find("option:not(:first-child)").remove();
        $.each(p, function(i, v){
            if(v.is_intention) {
                 var opt = $('<option value="' + v.product_id + '">' + v.product_name + '</option>');
                 opt.data("raw", {
                   "product_number" : v.product_number,
                   "product_name"   : v.product_name,
                   "price"          : v.price
                 });
                 o.append(opt);
            }
        });
        if(c) c();
  },
  //打印情况
  "order_print" : function(o,c){
        this.create_option({
          dats  : parent.DmConf.data.order_print,
          obj   : o,
          callback : c
        });
  },
  //订单状态列表
  "order_status" : function(o,c){
        this.create_option({
          dats  : parent.DmConf.data.order_status,
          obj   : o,
          id    : "status_id",
          text  : "name",
          callback : c
        });
  },
  //代收情况
  "collection" : function(o,c){
        this.create_option({
          dats  : parent.DmConf.data.collection,
          obj   : o,
          callback : c
        });
  },
  //
  "stock_kind" : function(o,c){
      this.create_option({
        dats  : parent.DmConf.data.stock_kind,
        id    : "kind_id",
        text  : "kind_name",
        obj   : o,
        callback : c
      });
  }
};

var get_plus_dats = Glob_Object;  //别名暂时的
